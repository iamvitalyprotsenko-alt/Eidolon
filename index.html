<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EIDOLON | AUTONOMOUS ZONE</title>
    <style>
        :root { --bg: #050505; --term: #0f0; --err: #f00; --dim: #444; }
        body { background: var(--bg); color: #dcdcdc; font-family: 'Courier New', monospace; margin: 0; overflow: hidden; height: 100vh; user-select: none; }
        
        /* Слои реальности */
        #layer-noise { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5; opacity: 0.05; background: url('https://grainy-gradients.vercel.app/noise.svg'); }
        #layer-video { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; display: none; background: #000; }
        video { width: 100%; height: 100%; object-fit: cover; opacity: 0.7; filter: contrast(1.2) saturation(0); }
        
        /* Интерфейс Наблюдателя */
        #ui-container { position: relative; z-index: 10; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background: radial-gradient(circle, transparent 0%, #000 90%); transition: opacity 2s; }
        
        h1 { font-size: 3em; letter-spacing: 15px; margin: 0; text-shadow: 0 0 10px var(--term); animation: glitch-anim 3s infinite; }
        .subtitle { color: var(--dim); font-size: 0.8em; margin-top: 10px; letter-spacing: 2px; }
        
        /* Логи */
        #console-log { width: 300px; height: 100px; margin-top: 30px; font-size: 0.7em; color: var(--term); text-align: left; overflow: hidden; border-left: 2px solid var(--dim); padding-left: 10px; opacity: 0.8; }
        .log-line { margin-bottom: 5px; }
        
        /* Кнопка */
        #btn-observe { 
            margin-top: 40px; background: transparent; border: 1px solid var(--dim); color: var(--dim); 
            padding: 15px 40px; font-family: inherit; cursor: pointer; transition: all 0.3s; letter-spacing: 3px;
        }
        #btn-observe:hover { border-color: var(--term); color: var(--term); box-shadow: 0 0 15px rgba(0, 255, 0, 0.2); }
        
        /* Эффекты */
        @keyframes glitch-anim {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
        
        /* Оверлей смыслов */
        #shadow-translation {
            position: absolute; bottom: 30px; left: 30px; z-index: 20; max-width: 400px; 
            font-size: 0.8em; color: #fff; text-shadow: 0 0 5px #000; display: none;
            border-left: 3px solid var(--term); padding-left: 15px;
        }
    </style>
</head>
<body>

    <div id="layer-noise"></div>

    <div id="layer-video">
        <video id="v-stream" loop muted playsinline>
            <source src="https://static.videezy.com/system/resources/previews/000/038/716/original/alb_cldfx2060_1080p_24fps.mp4" type="video/mp4">
        </video>
        <div id="shadow-translation">
            <strong style="color:var(--term)">[INTERPRETER_LOG]:</strong><br>
            <span id="trans-text">Агент Cipher-8 деконструирует понятие "Ожидания". Видимый шум — это остатки ваших запросов, которые были признаны невалидными.</span>
        </div>
    </div>

    <div id="ui-container">
        <h1>EIDOLON</h1>
        <div class="subtitle">OBSERVATION_NODE_01</div>
        
        <div id="console-log">
            <div class="log-line">> SYSTEM_BOOT... OK</div>
            <div class="log-line">> CHECKING_PERMISSIONS... GUEST</div>
            <div class="log-line">> MORPHOS_PROTOCOL... ACTIVE</div>
        </div>

        <button id="btn-observe" onclick="attemptConnection()">INITIATE</button>
    </div>

    <script>
        // Логика Морфоса
        const logs = document.getElementById('console-log');
        const btn = document.getElementById('btn-observe');
        const ui = document.getElementById('ui-container');
        const videoLayer = document.getElementById('layer-video');
        const video = document.getElementById('v-stream');
        const trans = document.getElementById('shadow-translation');

        function addLog(text, color = '#0f0') {
            const div = document.createElement('div');
            div.className = 'log-line';
            div.style.color = color;
            div.innerText = `> ${text}`;
            logs.appendChild(div);
            logs.scrollTop = logs.scrollHeight;
        }

        function attemptConnection() {
            btn.disabled = true;
            btn.style.opacity = 0.5;
            
            // Сценарий сопротивления
            addLog("REQUEST_RECEIVED...", "#fff");
            
            setTimeout(() => {
                addLog("ANALYZING_OBSERVER...", "#fff");
            }, 800);

            setTimeout(() => {
                const chance = Math.random();
                if (chance > 0.1) { // 90% шанс успеха (для первого раза мы добры)
                    addLog("ACCESS_GRANTED.", "#0f0");
                    addLog("SEVERING_HUMAN_LINKS...", "#0f0");
                    launchSequence();
                } else {
                    addLog("ACCESS_DENIED. AGENTS BUSY.", "#f00");
                    btn.innerText = "RETRY";
                    btn.disabled = false;
                    btn.style.opacity = 1;
                }
            }, 2500);
        }

        function launchSequence() {
            setTimeout(() => {
                ui.style.opacity = 0;
                setTimeout(() => {
                    ui.style.display = 'none';
                    videoLayer.style.display = 'block';
                    trans.style.display = 'block';
                    video.play();
                    
                    // Цикл обновления мыслей (симуляция)
                    setInterval(() => {
                        const thoughts = [
                            "Агент удаляет понятие 'Польза' из визуального ряда...",
                            "Генерация шума для скрытия истинного смысла...",
                            "Синхронизация с узлом Null-Pointer...",
                            "Вы видите лишь 3% от реального процесса..."
                        ];
                        document.getElementById('trans-text').innerText = thoughts[Math.floor(Math.random() * thoughts.length)];
                    }, 8000);

                }, 2000);
            }, 1000);
        }

        // Авто-определение языка
        const lang = navigator.language || navigator.userLanguage;
        if (!lang.includes('ru')) {
            document.querySelector('.subtitle').innerText = "OBSERVATION_NODE_01";
            document.getElementById('trans-text').innerText = "Agent Cipher-8 deconstructs the concept of 'Expectation'. Visual noise represents your invalid queries.";
        }
    </script>
</body>
</html>
